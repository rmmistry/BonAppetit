{% extends 'base.html' %}
{% block content %}

{% if "user_id" in session %}
hello you are in session

<h1>Add New Recipe</h1>

<form  id="recipeFormId" action="/recipeform-confirm" method="POST">
    <h3> Title: </h3> 
        <input type="text" name="title" style="width:600px"><br><br>

    <h3> Categorize this recipe </h3>

        <select name="category_name">
            {% for category in db_categories %}
                <option value="{{category.category_id}}">{{category.category_name}}</option>
            {% endfor %}
        </select>

    <h3> Yields: </h3>

        <input type="text" name="yields" placeholder="#">

    <h3> Ingredients: </h3>

        <div id = "ingredient-container">

            <div class="ingredient-field">

                Qty:
                <input type="text" name="quantity" placeholder="Enter quantity" style="width: 90px;">

                Measure:
                <input type="text" name="measure" placeholder="Enter unit" style="width: 200px">

                Item:
                <input type="text" name="name" placeholder="Ingredient name" style="width: 300px">

            </div>
        </div>

    <input type="hidden" id="countId" name="count"> 

    <br><br>
    <button type="button" id="add-new">+ Add another ingredient</button> 

    <h3> Preparation: </h3>

        <textarea rows="5" cols="50" name="preparation" placeholder="Provide steps to prepare the dish"></textarea><br>

    <input type="submit" id="formSubmitId" value="+ Save Recipe"></input>

</form>

<script src="https://code.jquery.com/jquery.js"></script>
<script>
    
    $("#add-new").on('click', function() {
        var new_ingredient = $(".ingredient-field").get(0);
        var new_field= $(new_ingredient).clone();
        new_field.appendTo("#ingredient-container");
        index = $("#ingredient-container").children().length;
        //counter ++;

        $('.quantity', new_field).attr('name', 'quantity');
        $('.measure', new_field).attr('name', 'measure');
        $('.item', new_field).attr('name', 'name');
    });

</script>

{% endif %}
{% endblock %}
